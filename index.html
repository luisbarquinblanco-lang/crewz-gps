<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Crewz GPS</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />

    <!-- Mapbox -->
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js"></script>

    <!-- Orbitron font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #000;
        font-family: "Orbitron", sans-serif;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }

      /* Barra de búsqueda */
      .search-bar {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: 80%;
        padding: 12px 16px;
        background: rgba(0, 0, 0, 0.75);
        border-radius: 12px;
        color: #ddd;
        font-size: 16px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        outline: none;
      }

      /* Botón centrar */
      .center-btn {
        position: absolute;
        bottom: 100px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: rgba(0, 0, 0, 0.8);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #ffcc00;
        cursor: pointer;
        box-shadow: 0 0 10px #ffcc00aa;
      }

      .center-btn img {
        width: 28px;
        height: 28px;
        filter: invert(90%) sepia(80%) saturate(500%) hue-rotate(10deg);
      }

      /* Menú inferior */
      .bottom-nav {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 80px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        background: rgba(10, 10, 10, 0.85);
        backdrop-filter: blur(8px);
        border-top: 2px solid #ffcc00;
      }

      .nav-item {
        flex: 1;
        text-align: center;
        color: #aaa;
        font-size: 14px;
        cursor: pointer;
        transition: color 0.3s;
      }

      .nav-item.active {
        color: #ffcc00;
        text-shadow: 0 0 8px #ffcc00;
      }
    </style>
  </head>
  <body>
    <!-- Mapa -->
    <div id="map"></div>

    <!-- Barra de búsqueda -->
    <input type="text" class="search-bar" placeholder="Buscar ubicación..." />

    <!-- Botón de centrar -->
    <div class="center-btn" id="centerBtn">
      <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" />
    </div>

    <!-- Menú inferior estilo NFS -->
    <div class="bottom-nav">
      <div class="nav-item active">Mapa</div>
      <div class="nav-item">Crew</div>
      <div class="nav-item">Mi coche</div>
      <div class="nav-item">Perfil</div>
    </div>

    <script>
      mapboxgl.accessToken =
        "pk.eyJ1IjoiY3Jld3phZG1pbiIsImEiOiJjbWVvdndxbHIwZWRyMmpxem9rb3l3b28zIn0.BiFAGqbjJ1bafh1UeUb0Pg";

      const map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/crewzadmin/cmepx1axn008s01qwd7boaagv", // tu estilo personalizado
        center: [-3.7038, 40.4168], // Madrid por defecto
        zoom: 12,
      });

      // Triángulo estilo NFS para ubicación
      const locationMarker = document.createElement("div");
      locationMarker.style.width = "0";
      locationMarker.style.height = "0";
      locationMarker.style.borderLeft = "10px solid transparent";
      locationMarker.style.borderRight = "10px solid transparent";
      locationMarker.style.borderBottom = "20px solid #ffcc00"; // amarillo
      locationMarker.style.background = "transparent";
      locationMarker.style.position = "relative";

      const inner = document.createElement("div");
      inner.style.position = "absolute";
      inner.style.top = "7px";
      inner.style.left = "-5px";
      inner.style.width = "10px";
      inner.style.height = "10px";
      inner.style.background = "black";
      inner.style.borderRadius = "50%";
      locationMarker.appendChild(inner);

      const marker = new mapboxgl.Marker({ element: locationMarker })
        .setLngLat([-3.7038, 40.4168])
        .addTo(map);

      // Botón para centrar en ubicación
      document.getElementById("centerBtn").addEventListener("click", () => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition((pos) => {
            const lng = pos.coords.longitude;
            const lat = pos.coords.latitude;
            map.flyTo({ center: [lng, lat], zoom: 15 });
            marker.setLngLat([lng, lat]);
          });
        }
      });
    </script>
  </body>
</html>

